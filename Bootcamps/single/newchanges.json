{
  "understanding": {
    "grafana_demo_approach": {
      "key_points": [
        "Uses OpenTelemetry SDK auto-instrumentation in each service",
        "Minimal collector configuration",
        "Metrics generated automatically by SDK",
        "No manual metric configuration needed"
      ]
    },
    "current_issues": [
      "Our configuration is too complex",
      "Manual metric configurations may interfere with auto-instrumentation",
      "Unnecessary exporters (Datadog, New Relic, Dynatrace)",
      "Blocking histogram metrics unnecessarily"
    ]
  },
  "planned_changes": {
    "collector_config": {
      "receivers": {
        "otlp": {
          "protocols": {
            "grpc": {},
            "http": {
              "cors": {
                "allowed_origins": ["http://*", "https://*"]
              }
            }
          }
        }
      },
      "exporters": {
        "logging": {}
      },
      "processors": {
        "batch": {}
      },
      "connectors": {
        "spanmetrics": {}
      },
      "service": {
        "pipelines": {
          "traces": {
            "receivers": ["otlp"],
            "processors": ["batch"],
            "exporters": ["logging", "spanmetrics"]
          },
          "metrics": {
            "receivers": ["otlp", "spanmetrics"],
            "processors": ["batch"],
            "exporters": ["logging"]
          }
        }
      }
    },
    "rationale": [
      "Simplify configuration to match Grafana demo approach",
      "Remove manual metric configurations",
      "Let OpenTelemetry SDK handle instrumentation",
      "Ensure all necessary metrics will be available through auto-instrumentation"
    ]
  }
}
